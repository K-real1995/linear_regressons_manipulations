# Импорт необходимых библиотек
import numpy as np  # Библиотека для работы с массивами и математическими операциями
from matplotlib import pyplot as plt  # Библиотека для создания графиков, импортируем подмодуль pyplot как plt

# Определение массивов данных
# y_pred_ - массив предсказанных значений (предсказания модели)
y_pred_ = np.array(
    [30.0, 25.03, 30.57, 28.61, 27.94, 25.26, 23.0, 19.54, 11.52, 18.92, 19.0, 21.59, 20.91, 19.55, 19.28, 19.3, 20.53,
     16.91, 16.18, 18.41, 12.52, 17.67, 15.83, 13.81, 15.68, 13.39, 15.46, 14.71, 19.55, 20.88, 11.46, 18.06, 8.81,
     14.28, 13.71, 23.81, 22.34, 23.11, 22.92, 31.36])
y_true_ = np.array(
    [24.0, 21.6, 34.7, 33.4, 36.2, 28.7, 22.9, 27.1, 16.5, 18.9, 15.0, 18.9, 21.7, 20.4, 18.2, 19.9, 23.1, 17.5, 20.2,
     18.2, 13.6, 19.6, 15.2, 14.5, 15.6, 13.9, 16.6, 14.8, 18.4, 21.0, 12.7, 14.5, 13.2, 13.1, 13.5, 18.9, 20.0, 21.0,
     24.7, 30.8])

# y_true_ - массив истинных значений (реальные наблюдаемые данные)
y_true_ = np.array([24.0, 21.6, 34.7, 33.4, 36.2, 28.7, 22.9, 27.1, 16.5, 18.9, 15.0, 18.9, 21.7, 20.4, 18.2, 19.9, 23.1, 17.5, 20.2, 18.2, 13.6, 19.6, 15.2, 14.5, 15.6, 13.9, 16.6, 14.8, 18.4, 21.0, 12.7, 14.5, 13.2, 13.1, 13.5, 18.9, 20.0, 21.0, 24.7, 30.8])

# Вычисление остатков (residuals) - разница между истинными и предсказанными значениями
# e = y_true - y_pred, где отрицательные значения означают, что предсказание было завышено, положительные - занижено
e = y_true_ - y_pred_

# Вычисление квадратов остатков
# e2 = e ** 2, это используется для оценки величины ошибки без учета знака (всегда положительное)
e2 = e ** 2

# Построение графика: scatter plot зависимости e2 от e
# Это покажет, как квадраты ошибок зависят от самих ошибок (по сути, параболическая зависимость y = x^2)
plt.scatter(e, e2)  # Создание точечного графика с e на оси x и e2 на оси y

# Настройка меток и заголовка графика
plt.xlabel('e (residuals)')  # Метка для оси x: 'e (residuals)'
plt.ylabel('e² (squared residuals)')  # Метка для оси y: 'e² (squared residuals)'
plt.title('Dependency of e² on e')  # Заголовок графика: 'Dependency of e² on e'

# Отображение графика
plt.show()  # Команда для показа графика в интерактивном режиме (например, в Jupyter или отдельном окне)